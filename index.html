<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Orion</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f1220;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.app {
  width: 100%;
  max-width: 400px;
  background: #181c36;
  padding: 20px;
  border-radius: 10px;
}
button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
}
#output p {
  margin: 8px 0;
}
</style>
</head>

<body>
<div class="app">
  <h2>Orion</h2>
  <p>Clareza antes da decisão.</p>
  <button id="mic">Falar com Orion</button>
  <div id="output"></div>
</div>

<script>
let tristeza = 0;

function falar(txt) {
  const u = new SpeechSynthesisUtterance(txt);
  u.lang = "pt-BR";
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function responder(texto) {
  texto = texto.toLowerCase();

  if (texto.includes("triste")) {
    tristeza++;

    if (tristeza === 1)
      return "Percebo tristeza. O que começou isso hoje?";
    if (tristeza === 2)
      return "Você voltou a esse sentimento. Ele está mais pesado agora?";
    return "Quando a tristeza insiste assim, ela quer ser entendida, não ignorada. O que você vem evitando sentir?";
  }

  return "Estou aqui. Pode falar.";
}

const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
rec.lang = "pt-BR";

document.getElementById("mic").onclick = () => rec.start();

rec.onresult = e => {
  const texto = e.results[0][0].transcript;
  const resp = responder(texto);

  document.getElementById("output").innerHTML +=
    `<p><b>Você:</b> ${texto}</p><p><b>Orion:</b> ${resp}</p>`;

  falar(resp);
};
</script>
</body>
</html>
